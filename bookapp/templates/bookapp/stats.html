{% extends 'bookapp/layout.html' %}

{% block content %}
<h3>Book stats</h3>
<ul>
    <li>Book with most pages: {% if most_pages %}{{ most_pages.title }}{% else %}N/A{% endif %}</li>
    <li>Book with least pages: {% if least_pages %}{{ least_pages.title }}{% else %}N/A{% endif %}</li>
    <li>Average pages: {{ avg_pages|default:"N/A" }}</li>
</ul>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js"></script>

<canvas width="400" id="statusChart"></canvas>
<canvas width="400" id="ratingChart"></canvas>

<script>

    new Chart(document.getElementById('statusChart'), {
        type: 'pie',
        data: {
            labels: {{ status_labels|safe }},
            datasets: [{
                data: {{ status_values|safe }},
                label: 'Total'
            }]
        },
        options: {
            responsive: false
        }
    })

    new Chart(document.getElementById('ratingChart'), {
        type: 'bar',
        data: {
            labels: {{ rating_labels|safe }},
            datasets: [{
                data: {{ rating_values|safe }},
                label: 'Total'
            }]
        },
        options: {
            responsive: false
        }
    })
    // ...existing code for statusChart and ratingChart...
</script>
{% endblock content %}
